# 유저 시나리오 기반 기능 정의, 유구사항 명세

---

## 🏷 브랜드 & 상품 (Brands / Products)

### 1. 브랜드 조회

#### 1-1. 기능적 요구사항 : 시스템이 "무엇을" 해야 하는지

- Happy Path (= 낙관적으로 동작하기를 기대하는 케이스)
    - 사용자는 "로그인 여부와 관계없이" 브랜드 정보를 조회 할 수 있다.
    - 사용자는 브랜드에 속한 상품 목록을 조회 할 수 있다.

- Fail Cases (= 실패 케이스)
    - 브랜드 정보가 존재하지 않으면 “오류를 반환한다”
    - 브랜드에 속한 상품이 존재하지 않으면 “오류를 반환한다”

#### 1-2. 비기능적 요구사항 : 시스템이 "어떻게" 해야 하는지

- 브랜드 조회는 1초 이내에 완료되어야 한다. ( 완료되지 않으면 오류로 간주 )
- 오류 상황에서는 명확한 HTTP 상태코드와 에러메세지를 반환해야 한다.
    - 브랜드 정보가 존재하지 않는 경우 / HTTP 404 Not Found
    - 브랜드에 속한 상품이 존재하지 않는 경우 / HTTP 404 Not Found
    - 브랜드 정보 조회 중 예외( DB 연결 실패 ) / HTTP 500 Internal Server Error

### 2. 상품 목록 조회

#### 2-1. 기능적 요구사항 : 시스템이 "무엇을" 해야 하는지

- Happy Path (= 낙관적으로 동작하기를 기대하는 케이스)
    - 사용자는 "로그인 여부와 관계없이" 상품 목록을 조회할 수 있다.
    - 카테고리별로 상품 목록을 조회할 수 있다.
    - 상품을 원하는 조건(신상품, 낮은가격순, 높은가격순, 좋아요많은순)으로 정렬할 수 있다.

- Fail Cases (= 실패 케이스)
    - 상품이 존재하지 않으면 “오류를 반환한다”

#### 2-2. 비기능적 요구사항 : 시스템이 "어떻게" 해야 하는지

- 상품 조회는 1초 이내에 완료되어야 한다. ( 완료되지 않으면 오류로 간주 )
- 카테고리별 조회는 정확한 카테고리 이름을 사용해야 한다.
- 정렬 기능은 사용자가 선택한 조건에 따라 정확히 동작해야 한다.
- 오류 상황에서는 명확한 HTTP 상태코드와 에러메세지를 반환해야 한다.
    - 상품 목록이 비어있는 경우 / HTTP 404 Not Found
    - 카테고리가 잘못되었을 경우 / HTTP 400 Bad Request
    - 정렬 조건이 잘못되었을 경우 / HTTP 400 Bad Request
    - 상품 조회 중 예외( DB 연결 실패 ) / HTTP 500 Internal Server Error

### 3. 상품 상세 조회

#### 3-1. 기능적 요구사항 : 시스템이 "무엇을" 해야 하는지

- Happy Path (= 낙관적으로 동작하기를 기대하는 케이스)
    - 사용자는 "로그인 여부와 관계없이" 상품을 상세 정보를 조회 할 수 있다.
    - 사용자는 상품의 브랜드 정보를 조회 할 수 있다.

- Fail Cases (= 실패 케이스)
    - 상품이 존재하지 않으면 “오류를 반환한다”
    - 상품의 브랜드 정보가 존재하지 않으면 “오류를 반환한다”

#### 3-2. 비기능적 요구사항 : 시스템이 "어떻게" 해야 하는지

- 상품 조회는 1초 이내에 완료되어야 한다. ( 완료되지 않으면 오류로 간주 )
- 오류 상황에서는 명확한 HTTP 상태코드와 에러메세지를 반환해야 한다.
    - 상품 정보가 존재하지 않는 경우 / HTTP 404 Not Found
    - 브랜드 정보가 존재하지 않는 경우 / HTTP 404 Not Found
    - 상품 정보 조회 중 예외( DB 연결 실패 ) / HTTP 500 Internal Server Error

---

## ❤️ 좋아요 (Likes)

### 4. 상품 좋아요 등록

#### 4-1. 기능적 요구사항 : 시스템이 "무엇을" 해야 하는지

- Happy Path (= 낙관적으로 동작하기를 기대하는 케이스)
    - 사용자는 "로그인 사용자"만 상품을 좋아요 할 수 있다.
    - 사용자가 상품을 좋아요 하면 해당 상품의 좋아요 수가 증가한다.

- Fail Cases (= 실패 케이스)
    - 로그인하지 않은 사용자가 좋아요를 누르면 "오류를 반환한다"

#### 4-2. 비기능적 요구사항 : 시스템이 "어떻게" 해야 하는지

- 좋아요 등록은 1초 이내에 완료되어야 한다. ( 완료되지 않으면 오류로 간주 )
- 오류 상황에서는 명확한 HTTP 상태코드와 에러메세지를 반환해야 한다.
    - 로그인하지 않은 사용자가 좋아요를 시도하는 경우 / HTTP 401 Unauthorized
    - 좋아요 등록 중 예외( DB 연결 실패 ) / HTTP 500 Internal Server Error

### 5. 상품 좋아요 취소

#### 5-1. 기능적 요구사항 : 시스템이 "무엇을" 해야 하는지

- Happy Path (= 낙관적으로 동작하기를 기대하는 케이스)
    - 사용자는 "로그인 사용자"만 상품을 좋아요 취소 할 수 있다.
    - 사용자가 상품을 좋아요 취소 하면 해당 상품의 좋아요 수가 감소한다.

- Fail Cases (= 실패 케이스)
    - 로그인하지 않은 사용자가 좋아요를 누르면 "오류를 반환한다"

#### 5-2. 비기능적 요구사항 : 시스템이 "어떻게" 해야 하는지

- 좋아요 취소는 1초 이내에 완료되어야 한다. ( 완료되지 않으면 오류로 간주 )
- 오류 상황에서는 명확한 HTTP 상태코드와 에러메세지를 반환해야 한다.
    - 로그인하지 않은 사용자가 좋아요 취소를 시도하는 경우 / HTTP 401 Unauthorized
    - 좋아요 취소 중 예외( DB 연결 실패 ) / HTTP 500 Internal Server Error

### 6. 내가 좋아요 한 상품 목록 조회

#### 6-1. 기능적 요구사항 : 시스템이 "무엇을" 해야 하는지

- Happy Path (= 낙관적으로 동작하기를 기대하는 케이스)
    - 사용자는 "로그인 사용자"만 자신의 좋아요 목록을 조회할 수 있다.

- Fail Cases (= 실패 케이스)
    - 로그인하지 않은 사용자가 좋아요 목록 조회를 시도하는 경우 "오류를 반환한다"
    - 좋아요 목록이 존재하지 않는 경우 빈 값을 반환한다.

#### 6-2. 비기능적 요구사항 : 시스템이 "어떻게" 해야 하는지

- 좋아요 목록 조회는 1초 이내에 완료되어야 한다. ( 완료되지 않으면 오류로 간주 )
- 오류 상황에서는 명확한 HTTP 상태코드와 에러메세지를 반환해야 한다.
    - 로그인하지 않은 사용자가 좋아요 목록 조회를 시도하는 경우 / HTTP 401 Unauthorized
    - 좋아요 목록 조회 중 예외( DB 연결 실패 ) / HTTP 500 Internal Server Error

--- 

## 🧾 주문 / 결제 (Orders)

### 7. 주문 요청

#### 7-1. 기능적 요구사항 : 시스템이 "무엇을" 해야 하는지

- Happy Path (= 낙관적으로 동작하기를 기대하는 케이스)
    - 사용자는 "로그인 사용자"만 주문 요청을 할 수 있다.
    - 색상 및 사이즈, 수량의 주문 정보를 입력할 수 있다.
    - 배송지 정보(주소, 연락처 등)를 입력할 수 있다.
    - 결재 요청을 할 수 있다.
    - 결재 성공 시 포인트를 차감한다.
    - 결재 성공 시, 상품의 재고를 차감한다.
    - 주문 요청이 성공하면 주문 ID를 반환한다.
    - 주문 요청이 성공하면 주문 상태를 "결제완료"로 설정한다.
    - 주문 요청이 성공하면 외부 시스템(예: 물류 시스템)에 주문 정보를 전송한다. (Mock 처리 가능)
    - 주문 요청이 성공하면 주문 내역을 저장한다.

- Fail Cases (= 실패 케이스)
    - 로그인하지 않은 사용자가 주문을 요청하는 경우 "오류를 반환한다
    - 상품이 존재하지 않는 경우 "오류를 반환한다"
    - 재고가 부족한 경우 "오류를 반환한다"
    - 포인트가 부족한 경우 "오류를 반환한다"
    - 외부 시스템 전송 실패 시 "오류를 반환한다"

#### 7-2. 비기능적 요구사항 : 시스템이 "어떻게" 해야 하는지

- 주문 요청은 1초 이내에 완료되어야 한다. ( 완료되지 않으면 오류로 간주 )
- 오류 상황에서는 명확한 HTTP 상태코드와 에러메세지를 반환해야 한다.
    - 로그인하지 않은 사용자가 주문 요청을 시도하는 경우 / HTTP 401 Unauthorized
    - 상품이 존재하지 않는 경우 / HTTP 404 Not Found
    - 재고가 부족한 경우 / HTTP 400 Bad Request
    - 포인트가 부족한 경우 / HTTP 400 Bad Request
    - 외부 시스템 전송 실패 시 / HTTP 502 Bad Gateway
    - 주문 요청 중 예외( DB 연결 실패 ) / HTTP 500 Internal Server Error

### 8. 유저의 주문 목록 조회

#### 8-1. 기능적 요구사항 : 시스템이 "무엇을" 해야 하는지

- Happy Path (= 낙관적으로 동작하기를 기대하는 케이스)
    - 사용자는 "로그인 사용자"만 자신의 주문 목록을 조회할 수 있다.
    - 사용자는 주문 목록을 날짜순으로 정렬하여 조회할 수 있다.
    - 사용자는 주문 상태(예: 결제완료, 배송중 등)에 따라 필터링할 수 있다.
    - 주문 목록 조회 시, 각 주문의 상세 정보(상품명, 수량, 가격 등)를 포함한다.

- Fail Cases (= 실패 케이스)
    - 로그인하지 않은 사용자가 주문 목록 조회를 시도하는 경우 "오류를 반환한다"
    - 주문 목록이 존재하지 않는 경우 빈 값을 반환한다.
    - 주문 목록 조회 중 예외( DB 연결 실패 ) "오류를 반환한다"

#### 8-2. 비기능적 요구사항 : 시스템이 "어떻게" 해야 하는지

- 주문 목록 조회는 1초 이내에 완료되어야 한다. ( 완료되지 않으면 오류로 간주 )
- 오류 상황에서는 명확한 HTTP 상태코드와 에러메세지를 반환해야 한다.
    - 로그인하지 않은 사용자가 주문 목록 조회를 시도하는 경우 / HTTP 401 Unauthorized
    - 주문 목록이 존재하지 않는 경우 / HTTP 404 Not Found
    - 주문 목록 조회 중 예외( DB 연결 실패 ) / HTTP 500 Internal Server Error

### 9. 단일 주문 상세 조회

#### 9-1. 기능적 요구사항 : 시스템이 "무엇을" 해야 하는지

- Happy Path (= 낙관적으로 동작하기를 기대하는 케이스)
    - 사용자는 "로그인 사용자"만 자신의 단일 주문 상세 정보를 조회할 수 있다.
    - 사용자는 주문 ID를 통해 특정 주문의 상세 정보를 조회할 수 있다.

- Fail Cases (= 실패 케이스)
    - 로그인하지 않은 사용자가 단일 주문 상세 조회를 시도하는 경우 "오류를 반환한다"
    - 주문이 존재하지 않는 경우 "오류를 반환한다"

#### 9-2. 비기능적 요구사항 : 시스템이 "어떻게" 해야 하는지

- 단일 주문 상세 조회는 1초 이내에 완료되어야 한다. ( 완료되지 않으면 오류로 간주 )
- 오류 상황에서는 명확한 HTTP 상태코드와 에러메세지를 반환해야 한다.
    - 로그인하지 않은 사용자가 단일 주문 상세 조회를 시도하는 경우 / HTTP 401 Unauthorized
    - 주문이 존재하지 않는 경우 / HTTP 404 Not Found
    - 주문 상세 조회 중 예외( DB 연결 실패 ) / HTTP 500 Internal Server Error

---
주문 시 필요한 처리:

* 상품 재고 확인 및 차감
* 포인트 확인 및 차감
* 주문 정보 외부 시스템 전송 (Mock 처리 가능)